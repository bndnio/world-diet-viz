(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,a){e.exports=a(273)},159:function(e,t,a){},160:function(e,t,a){},165:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},269:function(e,t,a){},273:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(10),c=a.n(i),o=(a(159),a(13)),s=a(14),l=a(16),u=a(15),p=a(17),h=(a(160),a(89)),d=(a(161),a(92)),f=(a(275),a(147)),m=a(90),g=(a(165),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.children,e.style),a=Object(m.a)(e,["children","style"]);return r.a.createElement("div",{className:"VisualizationBase-container"},r.a.createElement(f.a,Object.assign({style:t},a),this.props.children||"Pick a visualization to get started"))}}]),t}(n.Component)),b=a(44),y=(a(137),a(66)),O=(a(108),a(62)),v=a(38),j=a.n(v),x=a(45),E=n.createContext();function S(e){return function(t){return n.createElement(E.Consumer,null,function(a){return n.createElement(e,Object.assign({},t,{data:a}))})}}var C=n.createContext();function k(e){return function(t){return n.createElement(C.Consumer,null,function(a){return n.createElement(e,Object.assign({},t,{interaction:a}))})}}function w(){var e=Object(b.a)(["\n      {\n        countries\n      }\n    "]);return w=function(){return e},e}var D=O.a.Text,A=y.a.Option,M=k(S(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.data.setQuery({countries:e||[]}),a.props.interaction.setFields({availableCountries:e||[]})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=j()(w());return r.a.createElement(x.b,{query:t},function(t){var a=t.loading,n=t.error,i=t.data;if(a)return"Loading...";n&&console.log("Error loading gql data for CountryPicker");var c=i.countries;return r.a.createElement("div",null,r.a.createElement(D,null,"Country"),r.a.createElement(y.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:[],onChange:e.handleChange},c.map(function(e){return r.a.createElement(A,{key:e},e)})))})}}]),t}(n.Component))),N=a(20),P=(a(246),{width:1e3,height:300,padding:50,numDataPoints:50,maxRange:function(){return 1e3*Math.random()}}),Y=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.renderXAxis()}},{key:"componentDidUpdate",value:function(){this.renderXAxis()}},{key:"renderXAxis",value:function(){var e=this.refs.axisContainer,t=N.a().ticks(5).tickFormat(N.e("d")).scale(this.props.scale);N.j(e).call(t)}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),t}(r.a.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.renderYAxis()}},{key:"componentDidUpdate",value:function(){this.renderYAxis()}},{key:"renderYAxis",value:function(){var e=this.refs.axisContainer,t=(this.props.flip?N.c():N.b()).ticks(5).scale(this.props.scale);N.j(e).call(t)}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),t}(r.a.Component),F=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("g",{className:"LE-xy-axis"},r.a.createElement(Y,{translate:"translate(0, ".concat(this.props.height-2*this.props.padding/3,")"),scale:this.props.xScale}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(P.width/2-this.props.padding/2,", ").concat(P.height-5,")")},"[year]"),r.a.createElement(R,{translate:"translate(".concat(this.props.padding,", 0)"),scale:this.props.yScale}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(10, ".concat(P.height/2,"), rotate(-90)")},"[total kCal]"),r.a.createElement(R,{translate:"translate(".concat(P.width-2*this.props.padding,", 0)"),scale:this.props.otherYScale,flip:!0}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(P.width-10,", ").concat(P.height/2,"), rotate(-90)")},"[Mean Age of Death]"))}}]),t}(r.a.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderLine",value:function(e){return r.a.createElement("line",{x1:this.props.xScale(e[0]),y1:this.props.yScale(e[1]),x2:this.props.xScale(e[2]),y2:this.props.yScale(e[3]),strokeWidth:2,stroke:this.props.color})}},{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderLine.bind(this)))}}]),t}(r.a.Component),T=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderCircle",value:function(e){return r.a.createElement("circle",{cx:this.props.xScale(e[2]),cy:this.props.yScale(e[3]),r:3,key:Math.random(),fill:this.props.color})}},{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderCircle.bind(this)))}}]),t}(r.a.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getXScale",value:function(){return N.i().domain([1983,2013]).range([this.props.padding,this.props.width-2*this.props.padding])}},{key:"getDataYScale",value:function(){return N.i().domain([1500,2500]).range([this.props.height-this.props.padding,this.props.padding])}},{key:"getDeathYScale",value:function(){return N.i().domain([50,100]).range([this.props.height-this.props.padding,this.props.padding])}},{key:"render",value:function(){var e=this.getXScale(),t=this.getDataYScale(),a=this.getDeathYScale();return r.a.createElement("svg",{width:this.props.width,height:this.props.height},r.a.createElement(L,Object.assign({xScale:e,yScale:t},this.props,{data:this.props.data,color:"#cbcfd6"})),r.a.createElement(L,Object.assign({xScale:e,yScale:a},this.props,{data:this.props.deathData,color:"#000000"})),r.a.createElement(T,Object.assign({xScale:e,yScale:t},this.props,{data:this.props.data,color:"#cbcfd6"})),r.a.createElement(T,Object.assign({xScale:e,yScale:a},this.props,{data:this.props.deathData,color:"#000000"})),r.a.createElement(F,Object.assign({xScale:e,yScale:t,otherYScale:a},this.props)))}}]),t}(r.a.Component),z=S(function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=[[1983,2055],[1984,2056],[1986,2053],[1988,2061],[1990,2164],[1992,2162],[1994,2189],[1996,2159],[1998,2209],[2e3,2183],[2002,2155],[2004,2124],[2006,2124],[2008,2126],[2010,2199],[2012,2228]];this.setState({data:e.map(function(e,t,a){return 0===t?void 0:[e[0],e[1],[a[t-1][0]],[a[t-1][1]]]}).filter(function(e){return!!e}),deathData:e.map(function(e){return[e[0],e[1]/27+2*(Math.random()-.5)]}).map(function(e,t,a){return 0===t?void 0:[e[0],e[1],[a[t-1][0]],[a[t-1][1]]]}).filter(function(e){return!!e})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Total kCal Consumption & Mortality v. Time"),r.a.createElement(q,Object.assign({data:this.state.data,deathData:this.state.deathData},P)))}}]),t}(r.a.Component)),V=(a(247),O.a.Title),W=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderAxis=function(){var e=a.refs.axisContainer,t=("bottom"===a.props.orient?N.a():"left"===a.props.orient?N.b():null).ticks(5).scale(a.props.scale);N.j(e).call(t)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.renderAxis()}},{key:"componentDidUpdate",value:function(){this.renderAxis()}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),t}(r.a.Component),X=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.settings;return r.a.createElement("g",{className:"xy-axis"},r.a.createElement(W,{translate:"translate(0, ".concat(e.height-e.padding,")"),scale:this.props.xScale,orient:"bottom"}),r.a.createElement(W,{translate:"translate(".concat(e.padding,", 0)"),scale:this.props.yScale,orient:"left"}))}}]),t}(r.a.Component),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderCircle=function(e){return r.a.createElement("circle",{cx:a.props.xScale(e[0]),cy:a.props.yScale(e[1]),r:2,key:1*Math.random()})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderCircle))}}]),t}(r.a.Component),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getXScale=function(){var e=a.props.settings,t=N.f(a.props.data,function(e){return e[0]});return N.i().domain([0,t]).range([e.padding,e.width-2*e.padding])},a.getYScale=function(){var e=a.props.settings,t=N.f(a.props.data,function(e){return e[1]});return N.i().domain([0,t]).range([e.height-e.padding,e.padding])},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.settings,t=e.xScale||this.getXScale(),a=e.yScale||this.getYScale();return r.a.createElement("svg",{width:e.width,height:e.height},r.a.createElement(B,Object.assign({xScale:t,yScale:a},this.props)),r.a.createElement(X,Object.assign({xScale:t,yScale:a},this.props)))}}]),t}(r.a.Component),U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).randomizeData=function(){var e=a.props.settings,t=N.h(e.numDataPoints).map(function(){return[Math.floor(Math.random()*e.maxRange()),Math.floor(Math.random()*e.maxRange())]});a.setState({data:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.randomizeData()}},{key:"render",value:function(){var e=this.props.settings;return r.a.createElement("div",null,r.a.createElement(V,null,"Sample Scatterplot"),r.a.createElement(G,{data:this.state.data,settings:e}),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"btn randomize",onClick:this.randomizeData},"Randomize Data")))}}]),t}(n.Component);U.defaultProps={settings:{width:1e3,height:600,padding:30,numDataPoints:50,maxRange:function(){return 1e3*Math.random()}}};var Q=S(U),J=a(64),I=a.n(J),$=a(46),H=a(88),K=(a(250),{"Grand Total - Animal Protein - Food supply":"Animal Protein","Grand Total - Carbs - Food supply":"Carbs","Grand Total - Fat - Food supply":"Fat","Grand Total - Food supply":"Grand Total","Grand Total - Plant Protein - Food supply":"Plant Protein","Grand Total - Protein - Food supply":"Protein"}),Z=["ALIGN","FOLLOW"],_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderAxis=function(){var e=a.refs.axisContainer,t=("bottom"===a.props.orient?N.a():"top"===a.props.orient?N.d():"left"===a.props.orient?N.b():null).ticks(5).scale(a.props.scale);N.j(e).call(t)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.renderAxis()}},{key:"componentDidUpdate",value:function(){this.renderAxis()}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),t}(r.a.Component),ee=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.settings;return r.a.createElement("g",{className:"xy-axis"},r.a.createElement(_,{translate:"translate(0, ".concat(e.padding,")"),scale:this.props.xScale,orient:"top"}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(e.width/2,", 15)")},"[kCal / person / day]"),r.a.createElement(_,{translate:"translate(".concat(e.width/2,", 0)"),scale:this.props.yScale,orient:"left"}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(e.width/2,", ").concat(e.height-e.padding+15,")")},"[year]"))}}]),t}(r.a.Component),te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderRect=function(e){var t=a.props.settings;if(t.mode===Z[0])var n=t.width/2-a.props.xScale(e.xDiff),i=Math.abs(n),c=n>0?a.props.xScale(e.xDiff):t.width/2;else t.mode===Z[1]&&(n=a.props.xScale(e.xAbs)-a.props.xScale(e.xLast),i=Math.abs(n),c=e.xDiff>0?a.props.xScale(e.xLast):a.props.xScale(e.xAbs));return r.a.createElement("rect",{x:c,y:a.props.yScale(e.year),width:i,height:(t.height-2*t.padding)/t.numDataPoints,className:e.xDiff>0?"goodBar":"badBar",key:1*Math.random()})},a.renderRectText=function(e){var t=a.props.settings;if(t.mode===Z[0])var n=t.width/2-a.props.xScale(e.xDiff),i=t.width/2-n;else t.mode===Z[1]&&(n=a.props.xScale(e.xAbs)-a.props.xScale(e.xLast),i=a.props.xScale(e.xLast)+(e.xDiff>0?3:-3));return r.a.createElement("text",{textAnchor:e.xDiff>0?"start":"end",x:i,y:a.props.yScale(e.year)+t.height/t.numDataPoints/2+3,key:1*Math.random()},e.xDiff>0&&"+",e.xDiff.toFixed(1))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderRect),this.props.data.map(this.renderRectText))}}]),t}(r.a.Component),ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getXScale=function(){var e=a.props.settings;if(e.mode===Z[0])var t=N.g(a.props.data,function(e){return e.xDiff}),n=N.f(a.props.data,function(e){return e.xDiff});else e.mode===Z[1]&&(t=N.g(a.props.data,function(e){return e.xAbs}),n=N.f(a.props.data,function(e){return e.xAbs}));var r=N.f([Math.abs(t),Math.abs(n)]);return N.i().domain([-r,r]).range([e.padding,e.width-e.padding])},a.getYScale=function(){var e=a.props.settings,t=N.g(a.props.data,function(e){return e.year}),n=N.f(a.props.data,function(e){return e.year});return N.i().domain([t,n+1]).range([e.padding,e.height-e.padding])},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.settings,t=this.props.xScale||this.getXScale(),a=this.props.xScale||this.getYScale();return r.a.createElement("svg",{width:e.width,height:e.height},r.a.createElement(te,Object.assign({xScale:t,yScale:a},this.props)),r.a.createElement(ee,Object.assign({xScale:t,yScale:a},this.props)))}}]),t}(r.a.Component),ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mode:Z[1]},a.toggleMode=function(){var e=a.state.mode;e===Z[0]?a.setState({mode:Z[1]}):e===Z[1]&&a.setState({mode:Z[0]})},a.processData=function(){console.log(a.props);var e=a.props.data.map(function(e,t,a){return 0!==t?{year:e[0],xLast:a[t-1][1],xDiff:e[1]-a[t-1][1],xAbs:e[1]}:null}).filter(function(e){return!!e});a.setState({data:e})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.processData()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.processData()}},{key:"render",value:function(){var e=this.props,t=e.settings,a=e.country,n=e.group;return r.a.createElement("div",{style:{width:t.width}},r.a.createElement("h3",null,a," - ",K[n]),r.a.createElement(ae,{data:this.state.data,settings:Object($.a)({},t,{mode:this.state.mode})}),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"btn randomize",onClick:this.toggleMode},"Toggle Mode"),r.a.createElement("button",{className:"btn randomize",onClick:this.processData},"Randomize Data")))}}]),t}(n.Component);ne.defaultProps={settings:{width:300,height:400,padding:40,baseYear:1985,numDataPoints:30,maxRange:function(){return 100*Math.random()}}};var re=ne,ie=(a(130),a(150)),ce=a(87),oe=(a(251),y.a.Option),se=function(e){return r.a.createElement(y.a,Object.assign({},e,{showSearch:!0,style:{width:200},placeholder:e.placeholder||"Select one",optionFilterProp:"children",onChange:function(t){console.log("selected ".concat(t)),e.handleChange(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}}),e.options.map(function(e,t){return r.a.createElement(oe,{key:e.value||t,value:e.value||e},e.display||e)}))};function le(){var e=Object(b.a)(["\n      {\n        names(type: MACRO)\n      }\n    "]);return le=function(){return e},e}var ue=k(function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.interaction.fields.availableCountries,a=this.props,n=a.country,i=a.group,c=j()(le()),o=function(t){return function(a){e.props.handleChange(Object(ce.a)({},t,a))}};return r.a.createElement(x.b,{query:c},function(a){var c=a.loading,s=a.error,l=a.data;return c?"Loading...":(s&&console.log("Error loading gql data for YearSlider"),r.a.createElement("div",{className:"WaterfallConfig"},r.a.createElement("h2",null,"Waterfall Config"),r.a.createElement(se,{placeholder:"Select a country",options:t,handleChange:o("country"),value:n||void 0}),r.a.createElement(se,{placeholder:"Select a group",options:l.names.map(function(e){return{value:e,display:K[e]}}),handleChange:o("group"),value:i||void 0}),r.a.createElement(ie.a,{type:"primary",onClick:e.props.toggleView},"Visualize")))})}}]),t}(n.Component)),pe=S(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={displayConfig:!0,country:null,group:null,data:[]},a.toggleView=function(){a.setState(function(e){return{displayConfig:!e.displayConfig}})},a.handleChange=function(){var e=Object(H.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object($.a)({},t));case 2:a.filterData();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.filterData=function(){var e=a.state,t=e.country,n=e.group,r=[];t&&n&&(r=a.props.data.data.map(function(e){return[e.year,e.countries.filter(function(e){return e.country===t})[0].items.filter(function(e){return e.name===n})[0].value]})),a.setState({data:r})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){e.data.data!==this.props.data.data&&this.filterData()}},{key:"render",value:function(){var e=this.state,t=e.data,a=Object(m.a)(e,["data"]);return r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("button",{onClick:this.toggleView,type:"primary",shape:"circle",icon:"search"},"switch")),this.state.displayConfig?r.a.createElement(ue,Object.assign({handleChange:this.handleChange},a)):r.a.createElement(re,Object.assign({},this.props,a,{data:t})))}}]),t}(n.Component)),he=(a(252),a(148));function de(){var e=Object(b.a)(["\n      {\n        yearRange {\n          min\n          max\n        }\n      }\n    "]);return de=function(){return e},e}var fe=O.a.Text,me=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleRelease=function(e){var t=Object(h.a)(Array(e[1]-e[0]+1).keys()).map(function(t){return e[0]+t});a.props.data.setQuery({years:t}),a.props.interaction.setFields({availableYears:t})};var n=a.props,r=n.min,i=n.max;return a.handleRelease([r,i]),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.min,a=e.max;return r.a.createElement("div",null,r.a.createElement(fe,null,"Year"),r.a.createElement(he.a,{range:!0,defaultValue:[t,a],min:t,max:a,onAfterChange:this.handleRelease}))}}]),t}(n.Component),ge=k(S(function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=j()(de());return r.a.createElement(x.b,{query:t},function(t){var a=t.loading,n=t.error,i=t.data;if(a)return"Loading...";n&&console.log("Error loading gql data for YearSlider");var c=i.yearRange,o=c.min,s=c.max;return r.a.createElement(me,Object.assign({},e.props,{min:o,max:s}))})}}]),t}(n.Component))),be=(a(269),d.a.Sider),ye=d.a.Content,Oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={waterfalls:[]},a.openVisualization=function(e){a.setState({openVisualization:e})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{style:{height:"100vh"}},r.a.createElement(be,{theme:"light",className:"sideBar"},r.a.createElement("h1",{className:"App-title"},"Nutrition InfoViz"),r.a.createElement(M,null),r.a.createElement("br",null),r.a.createElement(ge,null)),r.a.createElement(ye,{className:"dashboard"},r.a.createElement(g,null,r.a.createElement(Q,null)),r.a.createElement(g,null,r.a.createElement(z,null)),this.state.waterfalls,r.a.createElement(g,{onClick:function(){return e.setState({waterfalls:[].concat(Object(h.a)(e.state.waterfalls),[r.a.createElement(g,null,r.a.createElement(pe,null))])})},style:{width:375}},"Click to add Waterfall")))}}]),t}(n.Component),ve=a(149);function je(){var e=Object(b.a)(["\n          {\n            itemByYearCountry(\n              ","\n              ","\n              ","\n            )\n              {\n              year\n              countries {\n                country\n                items {\n                  country\n                  year\n                  type\n                  name\n                  value\n                }\n              }\n            }\n          }\n        "]);return je=function(){return e},e}var xe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).setQuery=function(){var t=Object(H.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(function(e){return{queryParams:Object($.a)({},e.queryParams,a)}});case 2:e.getData();case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.setData=function(t){e.setState({data:t,loading:!1}),console.log("setData",t)},e.getData=function(){var t=e.state.queryParams,a=t.years,n=t.countries,r=t.type;console.log(e.state.queryParams),e.setState({loading:!0}),e.client.query({query:j()(je(),a.length>0?"years:".concat(JSON.stringify(a),", "):"",n.length>0?"countries:".concat(JSON.stringify(n),", "):"",r?"type:".concat(r):"")}).then(function(t){return e.setData(t.data.itemByYearCountry)}).catch(function(e){return console.log(e)})},e.state={setDate:e.setData,setQuery:e.setQuery,data:[],queryParams:{type:"MACRO",countries:[],years:[]},loading:!0},e.client=new ve.a({uri:"http://localhost:4000/graphql"}),e.getData(),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.createElement(E.Provider,{value:this.state},n.createElement(x.a,{client:this.client},this.props.children))}}]),t}(n.Component),Ee=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).setFields=function(t){e.setState(function(e){return{fields:Object($.a)({},e.fields,t)}})},e.state={setFields:e.setFields,fields:{availableYears:[],availableCountries:[],selectedYear:null,selectedCountry:null,hoveredYear:null,hoveredCountry:null}},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.createElement(C.Provider,{value:this.state},this.props.children)}}]),t}(n.Component),Se=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(xe,null,r.a.createElement(Ee,null,r.a.createElement("div",{className:"App"},r.a.createElement(Oe,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[154,1,2]]]);
//# sourceMappingURL=main.29eefb8f.chunk.js.map