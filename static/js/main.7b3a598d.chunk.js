(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(t,e,a){t.exports=a(273)},160:function(t,e,a){},161:function(t,e,a){},234:function(t,e,a){},247:function(t,e,a){},250:function(t,e,a){},251:function(t,e,a){},269:function(t,e,a){},273:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(10),o=a.n(i),c=(a(160),a(13)),s=a(14),l=a(16),u=a(15),p=a(17),d=(a(161),a(70),a(40)),h=a(91),f=(a(164),a(93)),m=a(46),g=(a(137),a(67)),b=(a(138),a(90)),y=a(38),v=a.n(y),O=a(47),j=n.createContext();function x(t){return function(e){return n.createElement(j.Consumer,null,function(a){return n.createElement(t,Object.assign({},e,{data:a}))})}}var E=n.createContext();function C(t){return function(e){return n.createElement(E.Consumer,null,function(a){return n.createElement(t,Object.assign({},e,{interaction:a}))})}}function S(){var t=Object(m.a)(["\n      {\n        countries\n      }\n    "]);return S=function(){return t},t}var k=b.a.Text,D=g.a.Option,w=C(x(function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).handleChange=function(t){a.props.data.setQuery({countries:t||[]}),a.props.interaction.setFields({availableCountries:t||[]})},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=v()(S());return r.a.createElement(O.b,{query:e},function(e){var a=e.loading,n=e.error,i=e.data;if(a)return"Loading...";n&&console.log("Error loading gql data for CountryPicker");var o=i.countries;return r.a.createElement("div",null,r.a.createElement(k,null,"Country"),r.a.createElement(g.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:[],onChange:t.handleChange},o.map(function(t){return r.a.createElement(D,{key:t},t)})))})}}]),e}(n.Component))),A=a(63),P=a(39),F=a(20),M=g.a.Option,N=function(t){return r.a.createElement(g.a,Object.assign({},t,{showSearch:!0,style:{width:200},placeholder:t.placeholder||"Select one",optionFilterProp:"children",onChange:function(e){t.handleChange(e)},filterOption:function(t,e){return e.props.children.toLowerCase().indexOf(t.toLowerCase())>=0}}),t.options.map(function(t,e){return r.a.createElement(M,{key:t.value||e,value:t.value||t},t.display||t)}))},Y={"Grand Total - Animal Protein - Food supply":"Animal Protein","Grand Total - Carbs - Food supply":"Carbs","Grand Total - Fat - Food supply":"Fat","Grand Total - Food supply":"Grand Total","Grand Total - Plant Protein - Food supply":"Plant Protein","Grand Total - Protein - Food supply":"Protein"},R=(a(234),{width:900,height:300,padding:50}),L=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.renderXAxis()}},{key:"componentDidUpdate",value:function(){this.renderXAxis()}},{key:"renderXAxis",value:function(){var t=this.refs.axisContainer,e=F.a().ticks(5).tickFormat(F.e("d")).scale(this.props.scale);F.j(t).call(e)}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),e}(r.a.Component),T=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.renderYAxis()}},{key:"componentDidUpdate",value:function(){this.renderYAxis()}},{key:"renderYAxis",value:function(){var t=this.refs.axisContainer,e=(this.props.flip?F.c():F.b()).ticks(5).scale(this.props.scale);F.j(t).call(e)}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),e}(r.a.Component),q=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("g",{className:"LE-xy-axis"},r.a.createElement(L,{translate:"translate(0, ".concat(this.props.height-2*this.props.padding/3,")"),scale:this.props.xScale}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(R.width/2-this.props.padding/2,", ").concat(R.height-5,")")},"[year]"),r.a.createElement(T,{translate:"translate(".concat(this.props.padding,", 0)"),scale:this.props.yScale}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(10, ".concat(R.height/2,"), rotate(-90)")},"[total kCal]"),r.a.createElement(T,{translate:"translate(".concat(R.width-2*this.props.padding,", 0)"),scale:this.props.otherYScale,flip:!0}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(R.width-10,", ").concat(R.height/2,"), rotate(-90)")},"[Mean Age of Death]"))}}]),e}(r.a.Component),z=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"renderLine",value:function(t){return r.a.createElement("line",{x1:this.props.xScale(t[0]),y1:this.props.yScale(t[1]),x2:this.props.xScale(t[2]),y2:this.props.yScale(t[3]),strokeWidth:2,stroke:this.props.color})}},{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderLine.bind(this)))}}]),e}(r.a.Component),G=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props,e=t.xScale,a=t.yScale,n=t.data,i=t.color;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{xScale:e,yScale:a,data:n,color:i}),r.a.createElement(z,{xScale:e,yScale:a,data:n,color:"#ccddff"}))}}]),e}(n.Component),V=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"renderFillBottom",value:function(t){return r.a.createElement("polygon",{points:"\n        ".concat(this.props.xScale(t[0]),",").concat(this.props.yScale(0),"\n        ").concat(this.props.xScale(t[2]),",").concat(this.props.yScale(0),"\n        ").concat(this.props.xScale(t[2]),",").concat(this.props.yScale(t[3]),"\n        ").concat(this.props.xScale(t[0]),",").concat(this.props.yScale(t[1]),"\n        "),fill:this.props.color})}},{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderFillBottom.bind(this)))}}]),e}(r.a.Component),W=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getXScale",value:function(){var t=this.props.interaction.fields.availableYears,e=t[0],a=t[t.length-1];return F.i().domain([e,a]).range([this.props.padding,this.props.width-2*this.props.padding])}},{key:"getDataYScale",value:function(){return F.i().domain([0,2500]).range([this.props.height-this.props.padding,this.props.padding])}},{key:"getDeathYScale",value:function(){return F.i().domain([50,100]).range([this.props.height-this.props.padding,this.props.padding])}},{key:"render",value:function(){var t=this.getXScale(),e=this.getDataYScale(),a=this.getDeathYScale();return r.a.createElement("svg",{width:this.props.width,height:this.props.height},r.a.createElement(G,{xScale:t,yScale:e,data:this.props.data,color:"#edf3ff"}),r.a.createElement(G,{xScale:t,yScale:e,data:this.props.measure3,color:"#ddeaff"}),r.a.createElement(G,{xScale:t,yScale:e,data:this.props.measure2,color:"#c1d8ff"}),r.a.createElement(G,{xScale:t,yScale:e,data:this.props.measure1,color:"#a0c4ff"}),r.a.createElement(z,Object.assign({xScale:t,yScale:a},this.props,{data:this.props.deathData,color:"#000000"})),r.a.createElement(q,Object.assign({xScale:t,yScale:e,otherYScale:a},this.props)))}}]),e}(r.a.Component),B=C(x(function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){this.processData()}},{key:"componentDidUpdate",value:function(t){t.data.data===this.props.data.data&&t.interaction.fields.selectedCountry===this.props.interaction.fields.selectedCountry||this.processData()}},{key:"processData",value:function(){console.log("processing");var t=this.props.interaction.fields.selectedCountry,e=[];t&&(e=this.props.data.data.map(function(e){return[e.year,e.countries.filter(function(e){return e.country===t})[0].items.reduce(function(t,e){return Object(P.a)({},t,Object(A.a)({},Y[e.name],e.value))},{})]})),this.setState({data:e,totalData:e.map(function(t,e,a){return 0===e?void 0:[t[0],t[1]["Grand Total"],a[e-1][0],a[e-1][1]["Grand Total"]]}).filter(function(t){return!!t}),deathData:e.map(function(t){return[t[0],t[1]/27+2*(Math.random()-.5)]}).map(function(t,e,a){return 0===e?void 0:[t[0],t[1],a[e-1][0],a[e-1][1]]}).filter(function(t){return!!t}),carbData:e.map(function(t,e,a){return 0===e?void 0:[t[0],t[1].Carbs,a[e-1][0],a[e-1][1].Carbs]}).filter(function(t){return!!t}),fatData:e.map(function(t,e,a){return 0===e?void 0:[t[0],t[1].Carbs+t[1].Fat,a[e-1][0],a[e-1][1].Carbs+a[e-1][1].Fat]}).filter(function(t){return!!t}),animalProteinData:e.map(function(t,e,a){return 0===e?void 0:[t[0],t[1].Carbs+t[1].Fat+t[1]["Animal Protein"],a[e-1][0],a[e-1][1].Carbs+a[e-1][1].Fat+a[e-1][1]["Animal Protein"]]}).filter(function(t){return!!t}),plantProteinData:e.map(function(t,e,a){return 0===e?void 0:[t[0],t[1].Carbs+t[1].Fat+t[1]["Animal Protein"]+t[1]["Plant Protein"],a[e-1][0],a[e-1][1].Carbs+a[e-1][1].Fat+a[e-1][1]["Animal Protein"]+a[e-1][1]["Plant Protein"]]}).filter(function(t){return!!t})})}},{key:"render",value:function(){var t=this;return r.a.createElement(d.a,{title:r.a.createElement("div",null,r.a.createElement("span",null,'"Life Expectancy v. Total kCal Consumption"'),r.a.createElement(N,{options:this.props.interaction.fields.availableCountries||[],handleChange:function(e){return t.props.interaction.setFields({selectedCountry:e})},disabled:this.props.data.loading||!this.props.interaction.fields.availableCountries})),loading:this.props.data.loading||!this.props.interaction.fields.availableCountries},this.props.interaction.fields.selectedCountry?r.a.createElement(W,Object.assign({},this.props,{data:this.state.totalData,deathData:this.state.deathData,measure1:this.state.carbData,measure2:this.state.fatData,measure3:this.state.animalProteinData,measure4:this.state.plantProteinData},R)):"select a country")}}]),e}(r.a.Component))),X=(a(247),function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).renderAxis=function(){var t=a.refs.axisContainer,e=("bottom"===a.props.orient?F.a():"left"===a.props.orient?F.b():null).ticks(5).scale(a.props.scale);F.j(t).call(e)},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.renderAxis()}},{key:"componentDidUpdate",value:function(){this.renderAxis()}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),e}(r.a.Component)),U=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.settings;return r.a.createElement("g",{className:"xy-axis"},r.a.createElement(X,{translate:"translate(0, ".concat(t.height-t.padding,")"),scale:this.props.xScale,orient:"bottom"}),r.a.createElement(X,{translate:"translate(".concat(t.padding,", 0)"),scale:this.props.yScale,orient:"left"}))}}]),e}(r.a.Component),Q=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).renderCircle=function(t){return r.a.createElement("circle",{cx:a.props.xScale(t[0]),cy:a.props.yScale(t[1]),r:2,key:1*Math.random()})},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderCircle))}}]),e}(r.a.Component),J=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).getXScale=function(){var t=a.props.settings,e=F.f(a.props.data,function(t){return t[0]});return F.i().domain([0,e]).range([t.padding,t.width-2*t.padding])},a.getYScale=function(){var t=a.props.settings,e=F.f(a.props.data,function(t){return t[1]});return F.i().domain([0,e]).range([t.height-t.padding,t.padding])},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.settings,e=t.xScale||this.getXScale(),a=t.yScale||this.getYScale();return r.a.createElement("svg",{width:t.width,height:t.height},r.a.createElement(Q,Object.assign({xScale:e,yScale:a},this.props)),r.a.createElement(U,Object.assign({xScale:e,yScale:a},this.props)))}}]),e}(r.a.Component),I=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).randomizeData=function(){var t=a.props.settings,e=F.h(t.numDataPoints).map(function(){return[Math.floor(Math.random()*t.maxRange()),Math.floor(Math.random()*t.maxRange())]});a.setState({data:e})},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){this.randomizeData()}},{key:"render",value:function(){var t=this.props.settings;return r.a.createElement(d.a,{title:"Sample Scatterplot"},r.a.createElement(J,{data:this.state.data,settings:t}),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"btn randomize",onClick:this.randomizeData},"Randomize Data")))}}]),e}(n.Component);I.defaultProps={settings:{width:350,height:350,padding:30,numDataPoints:50,maxRange:function(){return 1e3*Math.random()}}};var $=x(I),H=a(151),K=a(65),Z=a.n(K),_=a(89),tt=(a(250),["ALIGN","FOLLOW"]),et=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).renderAxis=function(){var t=a.refs.axisContainer,e=("bottom"===a.props.orient?F.a():"top"===a.props.orient?F.d():"left"===a.props.orient?F.b():null).ticks(5).scale(a.props.scale);F.j(t).call(e)},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.renderAxis()}},{key:"componentDidUpdate",value:function(){this.renderAxis()}},{key:"render",value:function(){return r.a.createElement("g",{className:"axis",ref:"axisContainer",transform:this.props.translate})}}]),e}(r.a.Component),at=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.settings,e=t.padding,a=t.width,n=t.height,i=t.mode;return r.a.createElement("g",{className:"xy-axis"},r.a.createElement(et,{translate:"translate(0, ".concat(e,")"),scale:this.props.xScale,orient:"top"}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:"translate(".concat(a/2,", 15)")},"[kCal / person / day]"),r.a.createElement(et,{translate:i===i[1]?"translate(".concat(e,", 0)"):"translate(".concat(a/2,", 0)"),scale:this.props.yScale,orient:"left"}),r.a.createElement("text",{className:"axis",textAnchor:"middle",transform:i===tt[1]?"translate(".concat(e,", ").concat(n-e+15,")"):"translate(".concat(a/2,", ").concat(n-e+15,")")},"[year]"))}}]),e}(r.a.Component),nt=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).renderRect=function(t){var e=a.props.settings;if(e.mode===tt[0])var n=e.width/2-a.props.xScale(t.xDiff),i=Math.abs(n),o=n>0?a.props.xScale(t.xDiff):e.width/2;else e.mode===tt[1]&&(n=a.props.xScale(t.xAbs)-a.props.xScale(t.xLast),i=Math.abs(n),o=t.xDiff>0?a.props.xScale(t.xLast):a.props.xScale(t.xAbs));return r.a.createElement("rect",{x:o,y:a.props.yScale(t.year),width:i,height:(e.height-2*e.padding)/e.numDataPoints,className:t.xDiff>0?"goodBar":"badBar",key:1*Math.random()})},a.renderRectText=function(t){var e=a.props.settings;if(e.mode===tt[0])var n=e.width/2-a.props.xScale(t.xDiff),i=e.width/2-n;else e.mode===tt[1]&&(n=a.props.xScale(t.xAbs)-a.props.xScale(t.xLast),i=a.props.xScale(t.xLast)+(t.xDiff>0?3:-3));return r.a.createElement("text",{textAnchor:t.xDiff>0?"start":"end",x:i,y:a.props.yScale(t.year)+e.height/e.numDataPoints/2+3,key:1*Math.random()},t.xDiff>0&&"+",t.xDiff.toFixed(1))},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("g",null,this.props.data.map(this.renderRect),this.props.data.map(this.renderRectText))}}]),e}(r.a.Component),rt=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).getXScale=function(){var t=a.props.settings;if(t.mode===tt[0])var e=F.g(a.props.data,function(t){return t.xDiff}),n=F.f(a.props.data,function(t){return t.xDiff});else t.mode===tt[1]&&(e=F.g(a.props.data,function(t){return t.xAbs}),n=F.f(a.props.data,function(t){return t.xAbs}));var r=F.f([Math.abs(e),Math.abs(n)]);return F.i().domain([t.mode===tt[0]?-r:e,r]).range([t.padding,t.width-t.padding])},a.getYScale=function(){var t=a.props.settings,e=F.g(a.props.data,function(t){return t.year}),n=F.f(a.props.data,function(t){return t.year});return F.i().domain([e,n+1]).range([t.padding,t.height-t.padding])},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.settings,e=this.props.xScale||this.getXScale(),a=this.props.xScale||this.getYScale();return r.a.createElement("svg",{width:t.width,height:t.height},r.a.createElement(nt,Object.assign({xScale:e,yScale:a},this.props)),r.a.createElement(at,Object.assign({xScale:e,yScale:a},this.props)))}}]),e}(r.a.Component),it=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={mode:tt[1],data:[]},a.toggleMode=function(){var t=a.state.mode;t===tt[0]?a.setState({mode:tt[1]}):t===tt[1]&&a.setState({mode:tt[0]})},a.processData=function(){var t=a.props.data.map(function(t,e,a){return 0!==e?{year:t[0],xLast:a[e-1][1],xDiff:t[1]-a[e-1][1],xAbs:t[1]}:null}).filter(function(t){return!!t});a.setState({data:t})},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){this.processData()}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.processData()}},{key:"render",value:function(){var t=this.props,e=t.settings,a=t.country,n=t.group;return r.a.createElement(d.a,{title:"".concat(a," - ").concat(Y[n])},r.a.createElement(rt,{data:this.state.data,settings:Object(P.a)({},e,{numDataPoints:this.state.data.length+1,mode:this.state.mode})}),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:"btn randomize",onClick:this.toggleMode},"Toggle Mode"),r.a.createElement("button",{className:"btn randomize",onClick:this.processData},"Randomize Data")))}}]),e}(n.Component);it.defaultProps={settings:{width:300,height:400,padding:40,baseYear:1985,numDataPoints:30,maxRange:function(){return 100*Math.random()}}};var ot=it,ct=(a(115),a(150));a(251);function st(){var t=Object(m.a)(["\n      {\n        names(type: MACRO)\n      }\n    "]);return st=function(){return t},t}var lt=C(function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=this.props.interaction.fields.availableCountries,a=this.props,n=a.country,i=a.group,o=v()(st()),c=function(e){return function(a){t.props.handleChange(Object(A.a)({},e,a))}};return r.a.createElement(O.b,{query:o},function(a){var o=a.loading,s=a.error,l=a.data;return s&&console.log("Error loading gql data for YearSlider"),r.a.createElement(d.a,{title:"Waterfall Config",loading:o},!o&&r.a.createElement("div",{className:"WaterfallConfig"},r.a.createElement(N,{placeholder:"Select a country",options:e,handleChange:c("country"),value:n||void 0}),r.a.createElement(N,{placeholder:"Select a group",options:l.names.map(function(t){return{value:t,display:Y[t]}}),handleChange:c("group"),value:i||void 0}),r.a.createElement(ct.a,{type:"primary",onClick:t.props.toggleView},"Visualize")))})}}]),e}(n.Component)),ut=x(function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={displayConfig:!0,country:null,group:null,data:[]},a.toggleView=function(){a.setState(function(t){return{displayConfig:!t.displayConfig}})},a.handleChange=function(){var t=Object(_.a)(Z.a.mark(function t(e){return Z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.setState(Object(P.a)({},e));case 2:a.filterData();case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a.filterData=function(){var t=a.state,e=t.country,n=t.group,r=[];e&&n&&(r=a.props.data.data.map(function(t){return[t.year,t.countries.filter(function(t){return t.country===e})[0].items.filter(function(t){return t.name===n})[0].value]})),a.setState({data:r})},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidUpdate",value:function(t){t.data.data!==this.props.data.data&&this.filterData()}},{key:"render",value:function(){var t=this.state,e=t.data,a=Object(H.a)(t,["data"]);return r.a.createElement("div",null,this.state.displayConfig?r.a.createElement(lt,Object.assign({handleChange:this.handleChange,toggleView:this.toggleView},a)):r.a.createElement(ot,Object.assign({},this.props,a,{toggleView:this.toggleView,data:e})))}}]),e}(n.Component)),pt=(a(252),a(148));function dt(){var t=Object(m.a)(["\n      {\n        yearRange {\n          min\n          max\n        }\n      }\n    "]);return dt=function(){return t},t}var ht=b.a.Text,ft=function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleRelease=function(t){var e=Object(h.a)(Array(t[1]-t[0]+1).keys()).map(function(e){return t[0]+e});a.props.data.setQuery({years:e}),a.props.interaction.setFields({availableYears:e})};var n=a.props,r=n.min,i=n.max;return a.handleRelease([r,i]),a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props,e=t.min,a=t.max;return r.a.createElement("div",null,r.a.createElement(ht,null,"Year"),r.a.createElement(pt.a,{range:!0,defaultValue:[e,a],min:e,max:a,onAfterChange:this.handleRelease}))}}]),e}(n.Component),mt=C(x(function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=v()(dt());return r.a.createElement(O.b,{query:e},function(e){var a=e.loading,n=e.error,i=e.data;if(a)return"Loading...";n&&console.log("Error loading gql data for YearSlider");var o=i.yearRange,c=o.min,s=o.max;return r.a.createElement(ft,Object.assign({},t.props,{min:c,max:s}))})}}]),e}(n.Component))),gt=(a(269),f.a.Sider),bt=f.a.Content,yt=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={waterfalls:[]},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(f.a,{style:{height:"100vh"}},r.a.createElement(gt,{theme:"light",className:"sideBar"},r.a.createElement("h1",{className:"App-title"},"Nutrition InfoViz"),r.a.createElement(w,null),r.a.createElement("br",null),r.a.createElement(mt,null)),r.a.createElement(bt,{className:"dashboard"},r.a.createElement($,null),r.a.createElement(B,null),this.state.waterfalls,r.a.createElement(d.a,{onClick:function(){return t.setState({waterfalls:[].concat(Object(h.a)(t.state.waterfalls),[r.a.createElement(ut,null)])})},style:{width:375}},"Click to add Waterfall")))}}]),e}(n.Component),vt=a(149);function Ot(){var t=Object(m.a)(["\n          {\n            itemByYearCountry(\n              ","\n              ","\n              ","\n            )\n              {\n              year\n              countries {\n                country\n                items {\n                  country\n                  year\n                  type\n                  name\n                  value\n                }\n              }\n            }\n          }\n        "]);return Ot=function(){return t},t}var jt=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).setQuery=function(){var e=Object(_.a)(Z.a.mark(function e(a){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState(function(t){return{queryParams:Object(P.a)({},t.queryParams,a)}});case 2:t.getData();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.setData=function(e){t.setState({data:e,loading:!1}),console.log("setData",e)},t.getData=function(){var e=t.state.queryParams,a=e.years,n=e.countries,r=e.type;console.log(t.state.queryParams),t.setState({loading:!0}),t.client.query({query:v()(Ot(),a.length>0?"years:".concat(JSON.stringify(a),", "):"",n.length>0?"countries:".concat(JSON.stringify(n),", "):"",r?"type:".concat(r):"")}).then(function(e){return t.setData(e.data.itemByYearCountry)}).catch(function(t){return console.log(t)})},t.state={setDate:t.setData,setQuery:t.setQuery,data:[],queryParams:{type:"MACRO",countries:[],years:[]},loading:!0},t.client=new vt.a({uri:"http://localhost:4000/graphql"}),t.getData(),t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return n.createElement(j.Provider,{value:this.state},n.createElement(O.a,{client:this.client},this.props.children))}}]),e}(n.Component),xt=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).setFields=function(e){t.setState(function(t){return{fields:Object(P.a)({},t.fields,e)}})},t.state={setFields:t.setFields,fields:{availableYears:[],availableCountries:[],selectedYear:null,selectedCountry:null,hoveredYear:null,hoveredCountry:null}},t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return n.createElement(E.Provider,{value:this.state},this.props.children)}}]),e}(n.Component),Et=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement(jt,null,r.a.createElement(xt,null,r.a.createElement("div",{className:"App"},r.a.createElement(yt,null))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[155,1,2]]]);
//# sourceMappingURL=main.7b3a598d.chunk.js.map